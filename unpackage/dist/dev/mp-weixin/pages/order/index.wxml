<view class="container bg-gray-50 min-h-screen px-4 pt-6"><block wx:if="{{isLoading}}"><view class="loading-container flex justify-center items-center h-screen"><view class="loading-content bg-white p-6 rounded-xl shadow-lg"><text class="text-primary text-5xl"><view class="fa fa-circle-o-notch fa-spin _i"></view></text><text class="block mt-4 text-gray-600">加载中...</text></view></view></block><block wx:else><view><block wx:if="{{loadError}}"><view class="error-container p-6 bg-red-50 rounded-xl shadow-md mb-6"><text class="text-red-600 flex items-center"><view class="fa fa-exclamation-circle mr-2 _i"></view>加载失败，请重试</text><button data-event-opts="{{[['tap',[['reloadService',['$event']]]]]}}" class="mt-3 text-primary" bindtap="__e">重新加载</button></view></block><view class="service-card bg-white rounded-xl shadow-md mb-6"><view class="p-6 pt-20"><block wx:if="{{service.imagePath}}"><image class="service-card-image mr-4" style="width:100px;height:100px;box-shadow:0 4px 12px rgba(0,0,0,0.1);object-fit:cover;" src="{{service.imagePath}}"></image></block><view class="flex items-center mb-4 mb-41"><view class="flex-1"><text class="text-2xl font-bold text-gray-800 mb-2">{{''+(service.name||'未选择服务')+''}}</text><view class="flex items-center"><text class="text-gray-500 line-through">{{"¥"+$root.m0}}</text></view><view class="flex items-center mz-3"><text class="text-gray-500 md-3">{{service.describes||'Hot热门服务'}}</text></view></view></view></view></view><view class="form-card bg-white rounded-xl shadow-md mb-6 p-6"><text class="text-lg font-semibold text-gray-800 mb-5 order-info">订单信息</text><view class="form-card-body"><view class="mb-5"><text class="text-gray-700 font-medium mb-2">卫生程度:</text><picker class="border rounded-lg px-4 py-3 w-full appearance-none bg-white focus:outline-none" range="{{hygieneOptions}}" value="{{$root.g0}}" data-event-opts="{{[['change',[['onHygieneChange',['$event']]]]]}}" bindchange="__e"><view class="flex justify-between items-center py-2"><text class="text-gray-600">{{hygiene||'请选择'}}</text><text class="text-gray-400"><view class="fa fa-chevron-down _i"></view></text></view></picker></view><view class="mb-5"><text class="text-gray-700 font-medium mb-2">预约日期:</text><view class="relative"><picker class="border rounded-lg px-4 py-3 w-full" mode="date" value="{{date}}" data-event-opts="{{[['change',[['onDateChange',['$event']]]],['blur',[['handleBlur',['date']]]]]}}" bindchange="__e" bindblur="__e"><view class="flex justify-between items-center py-2 select-date"><text class="text-gray-600">{{date||'请选择日期'}}</text><text class="text-gray-400"><view class="fa fa-calendar _i"></view></text></view></picker></view></view><view class="mb-5"><text class="text-gray-700 font-medium mb-2">服务地址:</text><view class="relative"><input class="border rounded-lg px-4 py-3 w-full" placeholder="请输入详细地址" data-event-opts="{{[['blur',[['handleBlur',['address']]]],['input',[['__set_model',['','address','$event',[]]]]]]}}" value="{{address}}" bindblur="__e" bindinput="__e"/><block wx:if="{{!address&&touched.address}}"><text class="absolute -bottom-5 left-0 text-red-500 text-xs-addrs">请填写服务地址</text></block></view></view><view class="mb-5"><text class="text-gray-700 font-medium mb-2">备注信息:</text><textarea class="border rounded-lg px-4 py-3 w-full h-28 resize-vertical" placeholder="有什么特殊要求可以告诉我们" data-event-opts="{{[['input',[['__set_model',['','remark','$event',[]]]]]]}}" value="{{remark}}" bindinput="__e"></textarea></view></view></view><view class="price-card bg-white rounded-xl shadow-md mb-10 p-6"><text class="text-lg font-semibold text-gray-800 mb-4">价格明细</text><view class="space-y-3"><view class="mb-5"><label class="flex items-center cursor-pointer"><checkbox class="checkbox-custom mr-3" checked="{{isMember}}" data-event-opts="{{[['change',[['onMemberChange',['$event']]]]]}}" bindchange="__e"></checkbox><text class="text-gray-700">开通会员 (享受85折优惠)</text></label></view><view class="mt-4 pt-4 border-t border-gray-200 flex justify-between items-center"><text class="text-lg font-semibold text-gray-800">预估金额</text><text class="text-xl font-bold text-primary">{{"¥"+$root.m1}}</text></view></view></view><view class="submit-section fixed bottom-0 left-0 right-0 bg-white shadow-lg p-6"><button class="w-full bg-primary hover:bg-primary-dark text-white font-semibold py-4 px-6 rounded-lg shadow-lg" disabled="{{!isFormValid}}" data-event-opts="{{[['tap',[['submitOrder',['$event']]]]]}}" bindtap="__e">{{''+(loading?'提交中...':'提交订单')+''}}</button></view></view></block></view>