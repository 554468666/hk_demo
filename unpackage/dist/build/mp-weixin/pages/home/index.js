(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/home/index"],{"2f78":function(e,t,n){"use strict";(function(e,a){var r=n("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n("2eee")),o=r(n("c973")),c=n("0ffc"),s={data:function(){return{userInfo:null,hotServices:[],company:{name:"洁洁家政",englishName:"JJ housewifery",address:"上海市浦东新区陆家嘴",phone:"123-456-7890",bgImage:"https://img.picui.cn/free/2025/05/14/6824958d2d34c.png"},currentPage:1,pageSize:10,isHot:!0,ads:[{id:1,image:"/static/image/ad1.png"},{id:2,image:"/static/image/ad2.png"},{id:3,image:"/static/image/ad3.png"},{id:4,image:"/static/image/index_bg.png"},{id:5,image:"/static/image/ad3.png"}]}},onLoad:function(){var e=this;return(0,o.default)(i.default.mark((function t(){return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.userInfo){t.next=3;break}return t.next=3,e.onGetUserInfo();case 3:return t.next=5,e.getHotServices();case 5:case"end":return t.stop()}}),t)})))()},methods:{onGetUserInfo:function(){var t=this;return(0,o.default)(i.default.mark((function n(){var a,r,o,s,u,d;return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.getUserProfile({desc:"用于完善会员资料"});case 3:return a=n.sent,r=a.encryptedData,o=a.iv,s=a.rawData,u=a.signature,n.next=7,(0,c.login)({encryptedData:r,iv:o,rawData:s,signature:u});case 7:d=n.sent,200===d.statusCode?(t.userInfo=d.data,console.log(t.userInfo)):e.showToast({title:"登录失败",icon:"none"}),n.next=14;break;case 11:n.prev=11,n.t0=n["catch"](0),e.showToast({title:"用户拒绝授权",icon:"none"});case 14:case"end":return n.stop()}}),n,null,[[0,11]])})))()},getHotServices:function(){var t=this;return(0,o.default)(i.default.mark((function n(){var a;return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,(0,c.queryHotService)({current:t.currentPage,size:t.pageSize,isHot:t.isHot});case 2:a=n.sent,200===a.statusCode?(t.hotServices=a.data.records,console.log(t.hotServices)):(console.error("Failed to fetch hot services:",a.data.message),e.showToast({title:"获取热门服务失败",icon:"none"}));case 4:case"end":return n.stop()}}),n)})))()},orderService:function(e){getApp().globalData.service=e,console.log(e),a.navigateTo({url:"/pages/order/index"})},goToCompanyDetail:function(){e.navigateTo({url:"/pages/companyDetail/index"})}}};t.default=s}).call(this,n("543d")["default"],n("bc2e")["default"])},4948:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){}));var a=function(){var e=this,t=e.$createElement,n=(e._self._c,e.userInfo?e.hotServices.slice(0,4):null);e._isMounted||(e.e0=function(t,n){var a=arguments[arguments.length-1].currentTarget.dataset,r=a.eventParams||a["event-params"];n=r.service;return e.orderService(n)}),e.$mp.data=Object.assign({},{$root:{l0:n}})},r=[]},"7c59":function(e,t,n){},"7c6a":function(e,t,n){"use strict";(function(e,t){var a=n("4ea4");n("833b");a(n("66fd"));var r=a(n("e8b1"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(r.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},b506:function(e,t,n){"use strict";var a=n("7c59"),r=n.n(a);r.a},b7e3:function(e,t,n){"use strict";n.r(t);var a=n("2f78"),r=n.n(a);for(var i in a)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(i);t["default"]=r.a},e8b1:function(e,t,n){"use strict";n.r(t);var a=n("4948"),r=n("b7e3");for(var i in r)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(i);n("b506");var o=n("f0c5"),c=Object(o["a"])(r["default"],a["b"],a["c"],!1,null,"2763283d",null,!1,a["a"],void 0);t["default"]=c.exports}},[["7c6a","common/runtime","common/vendor"]]]);