(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/home/index"],{"24d0":function(e,t,n){},"2f78":function(e,t,n){"use strict";(function(e){var a=n("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n("2eee")),c=a(n("c973")),o=n("0ffc"),i={data:function(){return{userInfo:null,hotServices:[],company:{name:"家政服务公司",address:"上海市浦东新区陆家嘴",phone:"123-456-7890"},currentPage:1,pageSize:10,isHot:!0,ads:[{id:1,image:"static/ad1.jpg"},{id:2,image:"static/ad2.jpg"},{id:3,image:"static/ad3.jpg"}]}},onLoad:function(){var e=this;return(0,c.default)(r.default.mark((function t(){return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.userInfo){t.next=3;break}return t.next=3,e.onGetUserInfo();case 3:return t.next=5,e.getHotServices();case 5:case"end":return t.stop()}}),t)})))()},methods:{onGetUserInfo:function(){var t=this;return(0,c.default)(r.default.mark((function n(){var a,c,i,s,u,d;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.getUserProfile({desc:"用于完善会员资料"});case 3:return a=n.sent,c=a.encryptedData,i=a.iv,s=a.rawData,u=a.signature,n.next=7,(0,o.login)({encryptedData:c,iv:i,rawData:s,signature:u});case 7:d=n.sent,console.log(d),console.log(d.data),200===d.statusCode?t.userInfo=d.data.userInfo:e.showToast({title:"登录失败",icon:"none"}),n.next=16;break;case 13:n.prev=13,n.t0=n["catch"](0),e.showToast({title:"用户拒绝授权",icon:"none"});case 16:case"end":return n.stop()}}),n,null,[[0,13]])})))()},getHotServices:function(){var t=this;return(0,c.default)(r.default.mark((function n(){var a;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,(0,o.queryHotService)({current:t.currentPage,size:t.pageSize,isHot:t.isHot});case 2:a=n.sent,200===a.statusCode?t.hotServices=a.data.records:(console.error("Failed to fetch hot services:",a.data.message),e.showToast({title:"获取热门服务失败",icon:"none"}));case 4:case"end":return n.stop()}}),n)})))()},orderService:function(t){e.navigateTo({url:"/pages/order/index?serviceId=".concat(t.id)})},goToCompanyDetail:function(){e.navigateTo({url:"/pages/companyDetail/index"})}}};t.default=i}).call(this,n("543d")["default"])},"7c6a":function(e,t,n){"use strict";(function(e,t){var a=n("4ea4");n("833b");a(n("66fd"));var r=a(n("e8b1"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(r.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},"81f5":function(e,t,n){"use strict";var a=n("24d0"),r=n.n(a);r.a},"9dbc":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){}));var a=function(){var e=this,t=e.$createElement,n=(e._self._c,e.userInfo?e.hotServices.slice(0,4):null);e._isMounted||(e.e0=function(t,n){var a=arguments[arguments.length-1].currentTarget.dataset,r=a.eventParams||a["event-params"];n=r.service;return e.orderService(n)}),e.$mp.data=Object.assign({},{$root:{l0:n}})},r=[]},b7e3:function(e,t,n){"use strict";n.r(t);var a=n("2f78"),r=n.n(a);for(var c in a)["default"].indexOf(c)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(c);t["default"]=r.a},e8b1:function(e,t,n){"use strict";n.r(t);var a=n("9dbc"),r=n("b7e3");for(var c in r)["default"].indexOf(c)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(c);n("81f5");var o=n("f0c5"),i=Object(o["a"])(r["default"],a["b"],a["c"],!1,null,"cec6d690",null,!1,a["a"],void 0);t["default"]=i.exports}},[["7c6a","common/runtime","common/vendor"]]]);